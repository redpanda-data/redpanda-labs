= Build a Chat Room Application with Redpanda and Java
:description: Create a basic chat room application with Redpanda and Kafka Java clients.
:page-context-links: [{"name": "Docker", "to": "chat-room:docker/docker-java.adoc" },{"name": "Cloud", "to": "chat-room:cloud/cloud-java.adoc" } ]
:env-docker: true
:page-categories: Development, Clients
:page-layout: lab
:page-aliases: ROOT:develop:guide-java.adoc
// Set the path to content in this lab for both the docs site and the local GitHub README
:content-url: ./
ifdef::env-site[]
:content-url: https://github.com/redpanda-data/redpanda-labs/blob/main/clients/chat-room/docker/java/
endif::[]
ifndef::env-site[]
:imagesdir: ../../../docs/modules/clients/images/
endif::[]

Create a basic chat room application with Redpanda and https://central.sonatype.com/artifact/org.apache.kafka/kafka-clients[Kafka Java clients^].

This example shows you how to:

* Write a client application in Java to produce and consume chat room messages.
* Build and run multiple clients to exchange chat messages streamed through Redpanda.

image::chat-room.gif[Demo of the application, where two users are chatting to each other]

== What is a chat room application?

A chat room application is software that enables users to engage in real-time textual communication with one another. These applications typically allow multiple users to join a chat room, where they can send messages and interact with others in a group conversation.

Chat room applications often include features such as private messaging, user profiles, and notifications. Some popular chat room applications include Slack, Discord, and WhatsApp.

== Why use Redpanda?

Redpanda offers several features that make it ideal for building a fast, scalable, and robust chat room application.

* Scalability: Redpanda can scale horizontally and vertically to accommodate growing chat room usage over time.
* Low-latency: Redpanda is designed for minimal latency to provide a smooth user experience and fast message delivery.
* Fault tolerance: Redpanda is resilient to failures, thanks to its built-in replication and partitioning capabilities. This built-in resilience ensures that the chat room application continues to serve users even if individual brokers in the cluster experience downtime.
* Durability: Redpanda persists messages on disk, maintaining chat history and allowing users to read previous conversations.

== Prerequisites

- Complete the link:https://docs.redpanda.com/current/get-started/quick-start/[Redpanda Quickstart] before continuing. This example expands on the quickstart. You can choose to run either one or three brokers.

- Install the following:
+
--
** Java 11 or 17 (OpenJDK is recommended)
** Maven
--
+
[tabs]
====
Windows/Linux::
+
--
You can download OpenJDK from https://adoptium.net/temurin/releases[Adoptium^], and can follow the installation instructions for Maven on the https://maven.apache.org/install.html[official Maven website^].
--
macOS::
+
--
Mac users with Homebrew installed can run the following commands to install these dependencies:

```bash
brew install openjdk@11 maven
```

Make sure to follow any symlinking instructions in the Caveats output.
--
====

When the prerequisites are installed, the following commands should print the version of both Java and Maven:

[,bash]
----
java --version
mvn --version
----

== Run the lab

Compile the client chat application, run it from multiple client terminals, and chat between the clients.

. Clone this repository:
+
```bash
git clone https://github.com/redpanda-data/redpanda-labs.git
```

. Change into the example directory:
+
[,bash]
----
cd clients/chat-room/docker/java
----

. Install the dependencies by building the project:
+
[,bash]
----
mvn package
----
+
The output is verbose, but you should see a successful build message:
+
----
[INFO] BUILD SUCCESS
----

. Verify that the `chat-room` topic exists in your cluster by listing all topics:
+
[,bash]
----
docker exec -it redpanda rpk topic list
----
+
Output:
+
[.no-copy]
----
NAME       PARTITIONS  REPLICAS
chat-room  1           1
----

. If the topic doesn't exist yet, use link:https://docs.redpanda.com/current/get-started/rpk/[`rpk`] to create a `chat-room` topic:
+
[,bash]
----
docker exec -it redpanda rpk topic create chat-room
----
+
Output:
+
[.no-copy]
----
TOPIC      STATUS
chat-room  OK
----

. From `chat-room/docker/java`, compile the client application:
+
[,bash]
----
mvn compile
----

. Open at least two terminals, and for each terminal:
.. Run the client application:
+
[,bash]
----
mvn exec:java -Dexec.mainClass="com.example.Main"
----
.. When prompted with `Enter user name:`, enter a unique name for the chat room.
. Use the chat application: enter a message in a terminal, and verify that the message is received in the other terminals.
+
For example:
+
----
Enter user name:
Alice
Connected, press Ctrl+C to exit
Alice: Hi, I'm Alice
Bob: Hi Alice, I'm Bob, nice to meet you
----

== Files in the example

This example includes the following files:

- link:{content-url}src/main/java/com/example/Admin.java[`src/main/java/com/example/Admin.java`]: Checks whether the `chat-room` topic exists and creates it if not.
- link:{content-url}src/main/java/com/example/ChatProducer.java[`src/main/java/com/example/ChatProducer.java`]: A producer that sends strings entered by the user of the terminal to the `chat-room` topic. Messages are sent as JSON encoded strings.
- link:{content-url}src/main/java/com/example/ChatConsumer.java[`src/main/java/com/example/ChatConsumer.java`]: A consumer that reads all messages from the `chat-room`
topic and prints them to the console. You can start as many consumer groups as you like, but each group reads a message only once, which is why the example is using a generated UUID for the group ID. This way, each time you run the application, you see all previous messages.
- link:{content-url}src/main/java/com/example/Main.java[`src/main/java/com/example/Main.java`]: The client application that creates the topic, producer, and consumer and implements the chat logic.

== Next steps

This is a basic example of a chat room application. You can improve this application by implementing additional features and components, such as:

* A user interface to make it more interactive and user-friendly.
* A user registration and login system to authenticate users before they can access the chat room.
* Rate limiting and other measures to prevent spamming and abuse in the chat room.

== Suggested reading

For additional resources to help you build stream processing
applications that can aggregate, join, and filter your data streams, see:

* https://university.redpanda.com/[Redpanda University^]
* https://redpanda.com/blog[Redpanda Blog^]
* https://redpanda.com/resources[Resources^]
